{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{Calendar,momentLocalizer}from\"react-big-calendar\";import moment from\"moment\";import{toast}from\"react-hot-toast\";import axios from\"axios\";import\"react-big-calendar/lib/css/react-big-calendar.css\";import withDragAndDrop from\"react-big-calendar/lib/addons/dragAndDrop\";import\"react-big-calendar/lib/addons/dragAndDrop/styles.css\";import Summery from\"./Summery\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const localizer=momentLocalizer(moment);const Calender=_ref=>{let{onAdd,onDelete,onUpdate}=_ref;const DragAndDropCalendar=withDragAndDrop(Calendar);const[appointments,setAppointments]=useState([]);const[data,setData]=useState([]);console.log(appointments);// Fetch appointments from the database\n// useEffect(() => {\n//   async function fetchAppointments() {\n//     const allAppointments = await axios.get('/summery');\n//     const data = allAppointments.data;\n//     setAppointments(data);\n//   }\n//   fetchAppointments();\n// }, []);\n// Handle adding appointments\nconst handleSelectSlot=async slotInfo=>{const title=prompt(\"Enter appointment title:\");if(title){const newAppointment={id:Date.now(),title,start:slotInfo.start,end:slotInfo.end};setAppointments([...appointments,newAppointment]);const response=await axios.post(\"/Add-appointment\",newAppointment);setData(response.data);if(response.data.status===200){toast.success(response.data.message);}}};// Handle deleting appointments\nconst handleEventDelete=async appointmentId=>{setAppointments(appointments.filter(appt=>appt.id!==appointmentId));const response=await axios.post(\"/Delete-appointment\",appointmentId);if(response.data.status===200){toast.success(response.data.message);}};const handleEventDrop=async _ref2=>{let{event,start,end}=_ref2;const updatedEvent={...event,start,end};setAppointments(prev=>prev.map(appt=>appt.id===event.id?updatedEvent:appt));const response=await axios.post(\"/Update-appointment\",updatedEvent);if(response.data.status===200){toast.success(response.data.message);}};return/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(DragAndDropCalendar,{localizer:localizer,events:appointments,defaultView:\"week\",selectable:true,onSelectSlot:handleSelectSlot,onSelectEvent:event=>window.confirm(\"Delete this appointment?\")&&handleEventDelete(event.id),resizable:true,onEventDrop:handleEventDrop,onEventResize:handleEventDrop,style:{height:\"90vh\",width:'90%'}}),/*#__PURE__*/_jsx(Summery,{})]});};export default Calender;","map":{"version":3,"names":["React","useState","useEffect","Calendar","momentLocalizer","moment","toast","axios","withDragAndDrop","Summery","jsx","_jsx","jsxs","_jsxs","localizer","Calender","_ref","onAdd","onDelete","onUpdate","DragAndDropCalendar","appointments","setAppointments","data","setData","console","log","handleSelectSlot","slotInfo","title","prompt","newAppointment","id","Date","now","start","end","response","post","status","success","message","handleEventDelete","appointmentId","filter","appt","handleEventDrop","_ref2","event","updatedEvent","prev","map","style","display","children","events","defaultView","selectable","onSelectSlot","onSelectEvent","window","confirm","resizable","onEventDrop","onEventResize","height","width"],"sources":["D:/React_programs/myreact/weekly-calender/client/src/Components/Calender.js"],"sourcesContent":["import React, { useState,useEffect } from \"react\";\r\nimport { Calendar, momentLocalizer } from \"react-big-calendar\";\r\nimport moment from \"moment\";\r\nimport { toast } from \"react-hot-toast\";\r\nimport axios from \"axios\";\r\nimport \"react-big-calendar/lib/css/react-big-calendar.css\";\r\n\r\nimport withDragAndDrop from \"react-big-calendar/lib/addons/dragAndDrop\";\r\nimport \"react-big-calendar/lib/addons/dragAndDrop/styles.css\";\r\nimport Summery from \"./Summery\";\r\nconst localizer = momentLocalizer(moment);\r\n\r\nconst Calender = ({ onAdd, onDelete, onUpdate }) => {\r\n  const DragAndDropCalendar = withDragAndDrop(Calendar);\r\n  const [appointments, setAppointments] = useState([]);\r\n  const [data, setData] = useState([]);\r\n  console.log(appointments);\r\n\r\n  // Fetch appointments from the database\r\n  // useEffect(() => {\r\n  //   async function fetchAppointments() {\r\n\r\n  //     const allAppointments = await axios.get('/summery');\r\n\r\n  //     const data = allAppointments.data;\r\n\r\n  //     setAppointments(data);\r\n  //   }\r\n  //   fetchAppointments();\r\n  // }, []);\r\n\r\n  // Handle adding appointments\r\n  const handleSelectSlot = async (slotInfo) => {\r\n    const title = prompt(\"Enter appointment title:\");\r\n    if (title) {\r\n      const newAppointment = {\r\n        id: Date.now(),\r\n        title,\r\n        start: slotInfo.start,\r\n        end: slotInfo.end,\r\n      };\r\n      setAppointments([...appointments, newAppointment]);\r\n\r\n      const response = await axios.post(\"/Add-appointment\", newAppointment);\r\n      setData(response.data);\r\n      if (response.data.status === 200) {\r\n        toast.success(response.data.message);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Handle deleting appointments\r\n  const handleEventDelete = async (appointmentId) => {\r\n    setAppointments(appointments.filter((appt) => appt.id !== appointmentId));\r\n\r\n    const response = await axios.post(\"/Delete-appointment\", appointmentId);\r\n    if (response.data.status === 200) {\r\n      toast.success(response.data.message);\r\n    }\r\n  };\r\n\r\n  const handleEventDrop = async ({ event, start, end }) => {\r\n    const updatedEvent = { ...event, start, end };\r\n\r\n    setAppointments((prev) =>\r\n      prev.map((appt) => (appt.id === event.id ? updatedEvent : appt))\r\n    );\r\n\r\n    const response = await axios.post(\"/Update-appointment\", updatedEvent);\r\n    if (response.data.status === 200) {\r\n      toast.success(response.data.message);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div style={{display:'flex'}}>\r\n      <DragAndDropCalendar\r\n        localizer={localizer}\r\n        events={appointments}\r\n        defaultView=\"week\"\r\n        selectable\r\n        onSelectSlot={handleSelectSlot}\r\n        onSelectEvent={(event) =>\r\n          window.confirm(\"Delete this appointment?\") &&\r\n          handleEventDelete(event.id)\r\n        }\r\n        resizable\r\n        onEventDrop={handleEventDrop}\r\n        onEventResize={handleEventDrop}\r\n        style={{ height: \"90vh\" ,width:'90%'}}\r\n      />\r\n      <Summery/>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Calender;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}